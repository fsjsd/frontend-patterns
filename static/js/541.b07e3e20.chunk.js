"use strict";(self.webpackChunkfrontend_patterns=self.webpackChunkfrontend_patterns||[]).push([[541],{9541:function(e,n,r){r.r(n),r.d(n,{default:function(){return O}});var o,t,s,i,c=r(9439),a=r(168),l=r(2791),u=r(6031),d=[{x:10,y:10},{x:10,y:11},{x:10,y:12}],f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:21,r=Math.floor(Math.random()*e),o=Math.floor(Math.random()*n);return{x:r,y:o}},p=function(e,n){return e.x===n.x&&e.y===n.y},h=function(){return{applePos:f(),snakeCoords:d,direction:"ArrowUp",speedMs:null,score:0,highScore:0}},g=r(184),w=function(e){var n=e.cells,r=e.state;return(0,g.jsx)("pre",{"data-testid":"asciitext",style:{backgroundColor:"white",fontSize:"18px",lineHeight:"10px"},children:n.map((function(e,n){return e.map((function(e,o){var t={x:o,y:n};return p(r.applePos,t)?"*":p(r.snakeCoords[0],t)?"o":r.snakeCoords.some((function(e){return p(e,t)}))?".":" "})).join("")+"\n"}))})},x=20,y=function(e){return{x:e.x*x+Math.floor(10),y:e.y*x+Math.floor(10)}},C=function(e){var n=e.rows,r=e.cols,o=(e.cells,e.state),t=(0,l.useRef)(null);return(0,l.useLayoutEffect)((function(){t.current&&function(e,n,r,o,t){var s=e.getContext("2d");s&&(s.clearRect(0,0,n*x,r*x),s.lineWidth=10,s.lineCap="round",s.miterLimit=2,s.strokeStyle="#cccccc",t.snakeCoords.reduce((function(e,n){if(null!=e){var r=y(n);s.lineTo(r.x,r.y)}else{s.beginPath();var o=y(n);s.moveTo(o.x,o.y)}return n===t.snakeCoords.slice(-1).shift()&&s.stroke(),n}),null),s.fillRect(t.applePos.x*x,t.applePos.y*x,x,x))}(t.current,n,r,0,o)}),[t,o]),(0,g.jsx)("div",{style:{backgroundColor:"white"},children:(0,g.jsx)("canvas",{ref:t,width:n*x,height:r*x})})},Z=function(e,n){return p(e.applePos,n)?"red":p(e.snakeCoords[0],n)?"grey":e.snakeCoords.some((function(e){return p(e,n)}))?"darkgrey":"white"},k=u.ZP.div(o||(o=(0,a.Z)(["\n  width: ","px;\n  height: ","px;\n  display: inline-flex;\n  flex-wrap: wrap;\n"])),(function(e){return e.width}),(function(e){return e.height})),v=l.memo(u.ZP.div(t||(t=(0,a.Z)(["\n  width:","px;\n  height:","px;\n  background-color: ",";\n  display: inline-block;\n"])),(function(e){return e.size}),(function(e){return e.size}),(function(e){return e.bgcolor}))),A=function(e){var n=e.rows,r=e.cols,o=e.cells,t=e.state;return(0,g.jsx)(k,{width:20*n,height:20*r,children:o.map((function(e,n){return e.map((function(e,r){return(0,g.jsx)(v,{size:20,"data-testid":"".concat(n,", ").concat(r),bgcolor:Z(t,{x:r,y:n})},"".concat(n,", ").concat(r))}))}))})},m=r(4942),M=r(3433),b=r(1413),P=r(7868),S=function(e,n){var r,o=(r={},(0,m.Z)(r,P.gC.ArrowUp,(function(e){return e.direction===P.gC.ArrowDown?e:(0,b.Z)((0,b.Z)({},e),{},{direction:P.gC.ArrowUp})})),(0,m.Z)(r,P.gC.ArrowDown,(function(e){return e.direction===P.gC.ArrowUp?e:(0,b.Z)((0,b.Z)({},e),{},{direction:P.gC.ArrowDown})})),(0,m.Z)(r,P.gC.ArrowLeft,(function(e){return e.direction===P.gC.ArrowRight?e:(0,b.Z)((0,b.Z)({},e),{},{direction:P.gC.ArrowLeft})})),(0,m.Z)(r,P.gC.ArrowRight,(function(e){return e.direction===P.gC.ArrowLeft?e:(0,b.Z)((0,b.Z)({},e),{},{direction:P.gC.ArrowRight})})),(0,m.Z)(r,P.XL.Reset,(function(){return(0,b.Z)((0,b.Z)({},h()),{},{highScore:e.highScore})})),(0,m.Z)(r,P.XL.Start,(function(e){return(0,b.Z)((0,b.Z)({},e),{},{speedMs:200})})),(0,m.Z)(r,P.XL.Advance,(function(e){var n,r=e.snakeCoords.slice(),o=e.snakeCoords[0],t=null,s=!1;switch(e.direction){case"ArrowUp":t=(0,b.Z)((0,b.Z)({},o),{},{y:o.y-1}),0===o.y?s=!0:r=[t].concat((0,M.Z)(e.snakeCoords.slice(0,e.snakeCoords.length-1)));break;case"ArrowDown":t=(0,b.Z)((0,b.Z)({},o),{},{y:o.y+1}),20===o.y?s=!0:r=[t].concat((0,M.Z)(e.snakeCoords.slice(0,e.snakeCoords.length-1)));break;case"ArrowLeft":t=(0,b.Z)((0,b.Z)({},o),{},{x:o.x-1}),0===o.x?s=!0:r=[t].concat((0,M.Z)(e.snakeCoords.slice(0,e.snakeCoords.length-1)));break;case"ArrowRight":t=(0,b.Z)((0,b.Z)({},o),{},{x:o.x+1}),20===o.x?s=!0:r=[t].concat((0,M.Z)(e.snakeCoords.slice(0,e.snakeCoords.length-1)))}var i,c=e.applePos,a=null!==(n=e.speedMs)&&void 0!==n?n:200,l=e.score,u=e.direction,h=e.highScore;return null===t||s||(i=t,s=e.snakeCoords.some((function(e){return p(e,i)}))),t&&p(t,e.applePos)&&(a*=.9,c=f(),r=[].concat((0,M.Z)(r),[e.snakeCoords[e.snakeCoords.length-1]]),(l+=1)>e.highScore&&(h=l)),s&&(a=null,c=f(),r=d,l=0,u=P.gC.ArrowUp),{speedMs:a,direction:u,applePos:c,snakeCoords:r,score:l,highScore:h}})),r);return o[n.type]?o[n.type](e):e},j=u.ZP.div(s||(s=(0,a.Z)(["\n  outline:none;\n  display:inline-block;\n"]))),L=u.ZP.section(i||(i=(0,a.Z)(["\n  padding:10px;\n"]))),R=Array.from(Array(21).keys()).map((function(){return Array.from(Array(21).keys()).map((function(){return 0}))})),O=function(e){var n=e.viewMode,r=(0,l.useState)(n),o=(0,c.Z)(r,2),t=o[0],s=o[1],i=(0,l.useReducer)(S,h()),a=(0,c.Z)(i,2),u=a[0],d=a[1];(0,l.useEffect)((function(){var e,n=setInterval((function(){null!==u.speedMs&&d({type:P.XL.Advance})}),null!==(e=u.speedMs)&&void 0!==e?e:200);return function(){clearInterval(n)}}),[u.speedMs]);return(0,g.jsxs)("div",{style:{flexGrow:2,padding:"10px"},children:[(0,g.jsxs)(L,{role:"note",children:["Score: ",u.score,". High Score: ",u.highScore]}),(0,g.jsxs)(j,{role:"application",tabIndex:0,onKeyUp:function(e){if("t"===e.key){var n=[P.wO.Ascii,P.wO.Canvas,P.wO.Html];s((function(e){return n[(n.indexOf(e)+1)%n.length]}))}null===u.speedMs?d({type:P.XL.Start}):d({type:e.key})},onClick:function(){d({type:P.XL.Reset})},children:[t===P.wO.Html&&(0,g.jsx)(A,{rows:21,cols:21,cells:R,state:u}),t===P.wO.Ascii&&(0,g.jsx)(w,{rows:21,cols:21,cells:R,state:u}),t===P.wO.Canvas&&(0,g.jsx)(C,{rows:21,cols:21,cells:R,state:u})]}),(0,g.jsxs)(L,{children:["Press 't' to toggle view modes in game play (current mode: ",t,")"]})]})}}}]);
//# sourceMappingURL=541.b07e3e20.chunk.js.map